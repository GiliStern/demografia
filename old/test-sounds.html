<!DOCTYPE html>
<html lang="he" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sound Test - Hebrew Vampire Survivors</title>
    <style>
      body {
        font-family: "Heebo", Arial, sans-serif;
        background: #1a1a2e;
        color: white;
        padding: 20px;
        direction: rtl;
      }

      .sound-test {
        max-width: 800px;
        margin: 0 auto;
      }

      .sound-category {
        margin: 20px 0;
        padding: 20px;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 10px;
      }

      .sound-button {
        display: inline-block;
        margin: 10px;
        padding: 10px 20px;
        background: #4a90e2;
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        font-size: 16px;
      }

      .sound-button:hover {
        background: #5ba0f2;
      }

      .sound-button:active {
        background: #357abd;
      }
    </style>
  </head>
  <body>
    <div class="sound-test">
      <h1>בדיקת צלילים - Hebrew Vampire Survivors</h1>
      <p>לחץ על הכפתורים כדי לבדוק את הצלילים הנוצרים:</p>

      <div class="sound-category">
        <h3>צלילי משחק בסיסיים</h3>
        <button class="sound-button" onclick="testSound('button_click')">
          לחיצת כפתור
        </button>
        <button class="sound-button" onclick="testSound('weapon_fire')">
          ירי נשק
        </button>
        <button class="sound-button" onclick="testSound('enemy_hit')">
          פגיעה באויב
        </button>
        <button class="sound-button" onclick="testSound('pickup_item')">
          איסוף פריט
        </button>
        <button class="sound-button" onclick="testSound('level_up')">
          עליית רמה
        </button>
        <button class="sound-button" onclick="testSound('player_hurt')">
          פגיעה בשחקן
        </button>
        <button class="sound-button" onclick="testSound('enemy_death')">
          מוות אויב
        </button>
        <button class="sound-button" onclick="testSound('powerup')">
          כוח-על
        </button>
      </div>

      <div class="sound-category">
        <h3>צלילים תמטיים עבריים</h3>
        <button class="sound-button" onclick="testSound('shofar_blast')">
          תקיעת שופר
        </button>
        <button class="sound-button" onclick="testSound('coin_collect')">
          איסוף שקלים
        </button>
        <button class="sound-button" onclick="testSound('chicken_flap')">
          נפנוף תרנגולת
        </button>
        <button class="sound-button" onclick="testSound('chair_throw')">
          זריקת כיסא
        </button>
        <button class="sound-button" onclick="testSound('cactus_hit')">
          פגיעת צבר
        </button>
      </div>

      <div class="sound-category">
        <h3>בקרות</h3>
        <button class="sound-button" onclick="playRandomSequence()">
          נגן רצף אקראי
        </button>
        <button class="sound-button" onclick="stopAll()">עצור הכל</button>
      </div>

      <div
        id="status"
        style="
          margin-top: 20px;
          padding: 10px;
          background: rgba(0, 0, 0, 0.3);
          border-radius: 5px;
        "
      >
        מוכן לבדיקה...
      </div>
    </div>

    <script src="js/soundGenerator.js"></script>
    <script>
      let soundGenerator = null;

      // Initialize sound generator on first user interaction
      document.addEventListener(
        "click",
        function initAudio() {
          if (!soundGenerator) {
            soundGenerator = new SoundGenerator();
            updateStatus("מחולל הצלילים אותחל בהצלחה!");
          }
          document.removeEventListener("click", initAudio);
        },
        { once: true }
      );

      function testSound(soundId) {
        if (!soundGenerator) {
          updateStatus("לחץ על כפתור כלשהו כדי לאתחל את מערכת השמע...");
          return;
        }

        try {
          soundGenerator.playSound(soundId);
          updateStatus(`מנגן: ${soundId}`);
        } catch (error) {
          updateStatus(`שגיאה בניגון ${soundId}: ${error.message}`);
        }
      }

      function playRandomSequence() {
        if (!soundGenerator) {
          updateStatus("מערכת השמע לא אותחלה");
          return;
        }

        const sounds = [
          "button_click",
          "weapon_fire",
          "enemy_hit",
          "pickup_item",
          "level_up",
          "player_hurt",
          "enemy_death",
          "powerup",
          "shofar_blast",
          "coin_collect",
          "chicken_flap",
          "chair_throw",
          "cactus_hit",
        ];

        let delay = 0;
        for (let i = 0; i < 5; i++) {
          const randomSound = sounds[Math.floor(Math.random() * sounds.length)];
          setTimeout(() => {
            testSound(randomSound);
          }, delay);
          delay += 500;
        }

        updateStatus("מנגן רצף אקראי של 5 צלילים...");
      }

      function stopAll() {
        // Note: Web Audio API doesn't have a global stop, but we can note it
        updateStatus("נעצר (צלילים פרוצדוראליים יסתיימו אוטומטית)");
      }

      function updateStatus(message) {
        const status = document.getElementById("status");
        status.textContent = message;
        console.log("Sound Test:", message);
      }

      // Show instructions
      updateStatus(
        "לחץ על כפתור כלשהו כדי לאתחל את מערכת השמע ולהתחיל לבדוק צלילים"
      );
    </script>
  </body>
</html>
